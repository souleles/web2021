<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../style1.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <title>Home Page</title>
    </head>
    <body>
        <div class="topnav">
            <a href="/users">Home</a>
            <div class="dropdown">
                <button class="dropbtn">Edit Profile 
                  <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content">
                  <a href="/editprofile">Edit Username/Password</a>
                  <button id='view'>Data entries information</button>
                </div>
            </div>
            <form action="/logout" method="POST">        
            <input class="btn" type="submit" value="Log out">
        </div>


        <!-- creating the pop up for data -->
        <div class="popup center">
            <i class="bi bi-graph-up"></i>
            <h3>Your stats</h3><br>
            
            <div class="description">
                No entries yet!
            </div>
            <div class="dismiss-btn">
                <button id='dismiss-popup-btn'>Dismiss</button>
            </div>
        </div> 

        <script>
            document.getElementById('view').addEventListener('click', function(){
                document.getElementsByClassName('popup')[0].classList.add('active');
            });

            document.getElementById('dismiss-popup-btn').addEventListener('click', function(){
                document.getElementsByClassName('popup')[0].classList.remove('active');
            });

            $(document).ready(function(){
                $('button#view').click(function(e){
                    e.preventDefault();
                    $.get( "/view", function( data ) {
                        $( ".description" ).html(`Number of Entries: `+ data[0].count + `<br>Last entry: ` + data[0].last_entry);
                        //alert( "Load was performed." );
                        //alert(data);
                    });
                }); 
            })

        </script>
    </body>
</html>