<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Login Form</title>
        <link rel="stylesheet" href="style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>
        <form>
            <div class="login-box">
                <h1>Login</h1>
                
                <div class="textbox">
                    <label for="email">Email</label>
                    <input type="text" placeholder="Enter Email" name="email" id='email'required> 
                </div>

                <div class="textbox">
                    <label for="password">Password</label>
                    <input type="password" placeholder="Enter Password" name="password" id='password' required>
                </div>

                <button id="btn" type="submit" name="" value="Sign in">Sign in</button>
            </div>
            <div class="reference">
                <p style="margin-top: -250px;">Don't have an account? <a href="/register">Register</a>.</p>
            </div>
            <center><div class="errors" style="color: red; margin-top: 250px ; font-size: 20px;"></div></center>
        </form>


        <script>        
            $(document).ready(function(){
                $('button#btn').click(function(e){
                    e.preventDefault();
                    $.post({
                        url: '/signin',
                        type: 'POST',
                        //contentType: 'application/json', //false?
                        dataType: 'json',
                        data: {
                            email: $('#email').val(),
                            password: $('#password').val()
                        },
                        success: function(res){
                            //location.href = 'users.html';
                            document.location = '/users';
                        }, error: function(err){
                            $('.errors').html('<li>Error: ' + err.responseText)
                            //console.log(JSON.stringify(err));
                        }
                    });
                }); 
            })
        </script>
    </body> 
</html>